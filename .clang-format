# HotPlugPP C++ Code Style Configuration
# Based on project style guidelines

# Use LLVM style as base and customize
BasedOnStyle: LLVM

# C++ standard
Standard: c++17

# Language-specific
Language: Cpp

# Indentation - 4 spaces, no tabs
IndentWidth: 4
TabWidth: 4
UseTab: Never
ContinuationIndentWidth: 4

# Braces - opening brace on same line
BreakBeforeBraces: Attach

# Line length - prefer < 100 characters
ColumnLimit: 100

# Alignment
AlignAfterOpenBracket: Align
AlignConsecutiveAssignments:
  Enabled: false
AlignConsecutiveDeclarations:
  Enabled: false
AlignEscapedNewlines: DontAlign
AlignOperands: Align
AlignTrailingComments:
  Kind: Always
  OverEmptyLines: 1

# Break and wrap
AllowShortBlocksOnASingleLine: Empty
AllowShortCaseLabelsOnASingleLine: false
AllowShortFunctionsOnASingleLine: Inline
AllowShortIfStatementsOnASingleLine: Never
AllowShortLoopsOnASingleLine: false
AllowShortLambdasOnASingleLine: Inline
AlwaysBreakAfterReturnType: None
AlwaysBreakBeforeMultilineStrings: false
AlwaysBreakTemplateDeclarations: Yes

# Binary operators
BreakBeforeBinaryOperators: None

# Function arguments
BinPackArguments: true
BinPackParameters: true

# Constructors
BreakConstructorInitializers: BeforeColon
ConstructorInitializerIndentWidth: 4
ConstructorInitializerAllOnOneLineOrOnePerLine: false

# Inheritance
BreakInheritanceList: BeforeColon

# Namespaces
CompactNamespaces: false
FixNamespaceComments: true
NamespaceIndentation: None

# Pointers and references
DerivePointerAlignment: false
PointerAlignment: Left

# Includes
IncludeBlocks: Regroup
SortIncludes: CaseInsensitive
IncludeCategories:
  # Main header (if exists)
  - Regex:           '^"hotplugpp/'
    Priority:        1
  # Other project headers
  - Regex:           '^"'
    Priority:        2
  # System headers
  - Regex:           '^<[^/]+>'
    Priority:        3
  # C++ standard library
  - Regex:           '^<'
    Priority:        4

# Spacing
SpaceAfterCStyleCast: false
SpaceAfterLogicalNot: false
SpaceAfterTemplateKeyword: true
SpaceBeforeAssignmentOperators: true
SpaceBeforeCpp11BracedList: false
SpaceBeforeCtorInitializerColon: true
SpaceBeforeInheritanceColon: true
SpaceBeforeParens: ControlStatements
SpaceBeforeRangeBasedForLoopColon: true
SpaceInEmptyParentheses: false
SpacesBeforeTrailingComments: 1
SpacesInAngles: Never
SpacesInCStyleCastParentheses: false
SpacesInContainerLiterals: false
SpacesInParentheses: false
SpacesInSquareBrackets: false

# Empty lines
KeepEmptyLinesAtTheStartOfBlocks: false
MaxEmptyLinesToKeep: 1

# Penalties (fine-tuning for line breaking)
PenaltyBreakAssignment: 100
PenaltyBreakBeforeFirstCallParameter: 19
PenaltyBreakComment: 300
PenaltyBreakFirstLessLess: 120
PenaltyBreakString: 1000
PenaltyExcessCharacter: 1000000
PenaltyReturnTypeOnItsOwnLine: 60

# Other
ReflowComments: true
SortUsingDeclarations: true
